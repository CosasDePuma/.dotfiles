#!/bin/sh

# Check arguments
if test -z "${1}"; then
    echo "Usage: ${0} <theme>"
    echo
    echo "Available themes:"
    ls -1 ~/.config/themes
    exit 1
fi

# Check theme
THEME="${HOME}/.config/themes/${1}"
if ! test -d "${THEME}"; then
    echo "[ERR] The ${1} theme is not installed."
    exit 1
fi

# Foot
if type foot >/dev/null 2>&1; then
    ln -sf "${THEME}/foot.ini" ~/.config/foot/theme.ini
    echo "[INF] Foot theme set to ${1}"
fi

# Hyprland
if type Hyprland >/dev/null 2>&1; then
    ln -sf "${THEME}/hyprland.conf" ~/.config/hypr/theme.conf
    echo "[INF] Hyprland theme set to ${1}"
fi

# Kitty
if type kitty >/dev/null 2>&1; then
    ln -sf "${THEME}/kitty.conf" ~/.config/kitty/theme.conf
    echo "[INF] Kitty theme set to ${1}"
fi

# XMonad
if type xmonad >/dev/null 2>&1; then
    mkdir -p ~/.xmonad/lib/
    ln -sf "${THEME}/xmonad.hs" ~/.xmonad/lib/Theme.hs
    xmonad --recompile >/dev/null 2>&1
    xmonad --restart   >/dev/null 2>&1
    echo "[INF] XMonad theme set to ${1}"
fi